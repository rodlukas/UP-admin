name: Development
on:
  push:
    branches: [ "master" ]
  pull_request:
    branches: [ "master" ]

jobs:
    build:
        name: Build app
        runs-on: ubuntu-latest
        steps:
            - name: "☁️ checkout repository"
              uses: actions/checkout@v3

            - name: "🔧 setup node"
              uses: actions/setup-node@v3
              with:
                  node-version: 18

            - name: "install geckodriver"
              run: ./scripts/shell/install_geckodriver.sh

            - name: "create npmrc"
              run: ./scripts/shell/travis/create_npmrc.sh

            - name: "string substitution"
              run: ./scripts/shell/travis/string_substitution.sh
              shell: bash

            - name: "🔧 install npm@latest"
              run: yarn install

            - name: "🔍 run tests"
              run: yarn run frontend:test

            - name: "🔍 run audit"
              run: yarn run frontend:audit
